(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function c(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(o){if(o.ep)return;o.ep=!0;const s=c(o);fetch(o.href,s)}})();let u={s:2,deltaT:1,C1:n=>1+n};const v=[];function C(n){u={...u,...n},v.forEach(a=>a(u))}function T(n,a,c,e,o){const r=document.querySelector(a).querySelector(".config__var-input");r.value=e(o);const l=()=>C({[n]:c(r.value)});r.addEventListener("change",l),r.addEventListener("keydown",f=>{f.key==="Enter"&&l()}),C({[n]:o})}const b=n=>{const a=n.split("/");return a.length===1?parseFloat(n):a.reduce((c,e)=>c===1/0?parseFloat(e):c/parseFloat(e),1/0)};T("s",".config__var[data-var=s]",b,n=>n.toString(),2);T("deltaT",".config__var[data-var=deltaT]",parseFloat,n=>n.toString(),1);function M(n){v.push(n)}let i={positions:{C0:[{x:0,y:0}],C1:[{x:1,y:0}]},distances:[{x:1,y:0}],stopMessage:""};const L={C0:[{x:0,y:0}],C1:[{x:1,y:0}]},P=[{x:1,y:0}];function E(){k(),console.log(i.positions)}function k(){var a,c;i.positions=JSON.parse(JSON.stringify(L)),i.distances=JSON.parse(JSON.stringify(P));const n=1e3;for(let e=1;e<=n;e++){const o=i.positions.C0[e-1].x>i.positions.C1[e-1].x;i.positions.C0[e]={x:o?(((c=i.positions.C0[e-1])==null?void 0:c.x)??0)-u.s*u.deltaT:(((a=i.positions.C0[e-1])==null?void 0:a.x)??0)+u.s*u.deltaT,y:0},i.positions.C1[e]={x:u.C1(e*u.deltaT),y:0};const s={x:i.positions.C1[e].x-i.positions.C0[e].x,y:0};if(console.log(s.x),i.distances.some(r=>Math.abs(r.x-s.x)<=.001))return i.stopMessage="Les kangourous se trouvaient déjà à la même distance l'un de l'autre (= cycle).";if(i.distances[e]=s,i.distances[e].x===0)return i.stopMessage="Les kangourous se trouvaient au même endroit."}return i.stopMessage="On a atteint le nombre d'itération maximum."}const x=document.querySelector(".config__status__title");function $(){var a,c;const n=((a=i.positions.C0.at(-1))==null?void 0:a.x)===((c=i.positions.C1.at(-1))==null?void 0:c.x);x.classList.remove("config__status__title--lose","config__status__title--win"),n?(x.textContent="C0 gagne!",x.classList.add("config__status__title--win")):(x.textContent="C0 perd",x.classList.add("config__status__title--lose"))}const d=document.querySelector(".simul__graphic"),t=d.getContext("2d");let y=-1,h=15,g=-1,m=15;function w(){d.width=d.parentElement.clientWidth,d.height=d.parentElement.clientHeight;const n=i.positions.C0.concat(i.positions.C1);h=Math.ceil(n.reduce((a,c)=>a.x>c.x?a:c).x+1),m=i.positions.C0.length*u.deltaT,y=Math.min(Math.round(h/15),-1),g=Math.min(Math.round(g/15),-1),O(),F()}function O(){const n=d.width,a=d.height,e=p({x:0,y:0}),o=1;t.strokeStyle="#222",t.lineWidth=o,t.beginPath(),t.moveTo(e.x,0),t.lineTo(e.x,a),t.moveTo(0,e.y),t.lineTo(n,e.y),t.stroke(),t.font="12px 'Consolas'",t.textBaseline="top",t.textAlign="right";const s=6;t.fillText("0",e.x-s,e.y+s);const r=14;t.textAlign="center",t.textBaseline="top",t.beginPath();for(let l=Math.ceil(y)+1;l<h;l++){if(l===0)continue;const{x:f}=p({x:l});t.moveTo(f,e.y-r/2),t.lineTo(f,e.y+r/2),t.fillText(l.toString(),f,e.y+r/2+s)}t.textAlign="right",t.textBaseline="middle";for(let l=Math.ceil(g)+1;l<m;l++){if(l===0)continue;const{y:f}=p({y:l});t.moveTo(e.x-r/2,f),t.lineTo(e.x+r/2,f),t.fillText(l.toString(),e.x-r/2-s,f)}t.stroke()}function F(){if(!i.positions)return;const n=6,a=.6,c="184, 134, 11",e="30, 144, 255";t.fillStyle=`rgb(${e})`,t.setLineDash([5]),t.beginPath(),i.positions.C1.forEach((o,s)=>{const{x:r,y:l}=p({x:o.x,y:s*u.deltaT});t.arc(r,l,n,0,Math.PI*2)}),t.closePath(),t.fill(),t.beginPath(),t.strokeStyle=`rgba(${e}, ${a})`,i.positions.C1.forEach((o,s)=>{const{x:r,y:l}=p({x:o.x,y:s*u.deltaT});t.lineTo(r,l)}),t.stroke(),t.fillStyle=`rgb(${c})`,i.positions.C0.forEach((o,s)=>{t.beginPath();const{x:r,y:l}=p({x:o.x,y:s*u.deltaT});t.arc(r,l,n,0,Math.PI*2),t.fill()}),t.beginPath(),t.strokeStyle=`rgba(${c}, ${a})`,i.positions.C0.forEach((o,s)=>{const{x:r,y:l}=p({x:o.x,y:s*u.deltaT});t.lineTo(r,l)}),t.stroke()}function p(n){const a=d.width/(h-y),c=d.height/(m-g);return{x:n.x!==void 0?(n.x-y)*a:1/0,y:n.y!==void 0?d.height-(n.y-g)*c:1/0}}const I=document.querySelector(".simul__stop-message"),_=document.querySelector(".simul__positions");function q(){I.textContent=i.stopMessage,_.innerHTML="";for(let n=0;n<i.positions.C0.length;n++){const a=i.positions.C0[n],c=i.positions.C1[n],e=document.createElement("li");e.classList.add("simul__position");const o=document.createElement("span"),s=document.createElement("span"),r=document.createElement("span");o.innerHTML=`${n}&Delta;t`,s.innerHTML=`x<sub>0</sub> = ${a.x.toFixed(2)}`,r.innerHTML=`x<sub>1</sub> = ${c.x.toFixed(2)}`,e.append(o,s,r),_.appendChild(e)}}function S(){E(),$(),w(),q()}S();M(S);
